<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>音環境セルフチェック（即時スコア）</title>
  <style>
    :root { --fg:#111; --muted:#666; --line:#e6e6e6; --bg:#fff; --chip:#f6f6f6; }
    body { font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Hiragino Sans","Noto Sans JP","Yu Gothic",sans-serif;
           margin: 0; color: var(--fg); background: var(--bg); }
    .wrap { max-width: 980px; margin: 0 auto; padding: 18px 14px 28px; }
    h1 { font-size: 20px; margin: 0 0 8px; }
    .note { color: var(--muted); font-size: 13px; line-height: 1.55; margin-bottom: 14px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 860px){ .grid { grid-template-columns: 1fr 1fr 1fr; } }
    .card { border: 1px solid var(--line); border-radius: 12px; padding: 12px; }
    .card h2 { font-size: 16px; margin: 0 0 6px; }
    .sub { font-size: 12px; color: var(--muted); margin-bottom: 10px; }
    .sec { border-top: 1px dashed var(--line); padding-top: 10px; margin-top: 10px; }
    .sec:first-of-type { border-top: none; padding-top: 0; margin-top: 0; }
    .label { display:flex; gap:10px; align-items:flex-start; padding: 6px 0; }
    .label input { margin-top: 2px; transform: scale(1.1); }
    .label span { font-size: 13px; line-height: 1.45; }
    .pill { display:inline-block; font-size: 12px; padding: 2px 8px; border-radius: 999px; background: var(--chip); margin-left: 6px; }
    .result { display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin: 14px 0 10px; }
    .scorebox { border: 1px solid var(--line); border-radius: 12px; padding: 10px 12px; min-width: 220px; }
    .scorebox .t { font-size: 12px; color: var(--muted); }
    .scorebox .v { font-size: 18px; font-weight: 700; margin-top: 2px; }
    .comment { font-size: 13px; margin-top: 8px; line-height: 1.6; }
    .muted { color: var(--muted); }
    button { border: 1px solid var(--line); background: #fff; padding: 8px 10px; border-radius: 10px; cursor: pointer; }
    button:hover { background: #fafafa; }
    .foot { margin-top: 14px; font-size: 12px; color: var(--muted); line-height: 1.5; }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>音環境セルフチェック（即時スコア）</h1>
    <div class="note">
      チェックを入れると、各カテゴリーのスコアがその場で更新されます。<br>
      <span class="pill">良い項目＝＋1</span>
      <span class="pill">気になる項目＝−1</span>
      <br>
      ※セルフチェック（簡易指標）です。精密な測定（騒音レベル・残響時間等）の代替ではありません。
    </div>

    <div class="result">
      <div class="scorebox">
        <div class="t">建物・窓や壁</div>
        <div class="v"><span id="s-build">0</span> <span class="muted">（−5〜＋5）</span></div>
        <div class="comment" id="c-build"></div>
      </div>
      <div class="scorebox">
        <div class="t">子どもの声や活動</div>
        <div class="v"><span id="s-kids">0</span> <span class="muted">（−5〜＋5）</span></div>
        <div class="comment" id="c-kids"></div>
      </div>
      <div class="scorebox">
        <div class="t">保育者の声かけや会話</div>
        <div class="v"><span id="s-teach">0</span> <span class="muted">（−5〜＋5）</span></div>
        <div class="comment" id="c-teach"></div>
      </div>

      <button id="resetBtn" type="button">すべてリセット</button>
    </div>

    <div class="grid">

      <div class="card">
        <h2>建物・窓や壁</h2>
        <div class="sub">空間の“音の抜け”と、室内の“柔らかさ（吸音）”の目安</div>

        <div class="sec">
          <div class="sub"><span class="pill">＋</span> 良い状態の目安</div>
          <label class="label"><input type="checkbox" data-cat="build" data-w="1"><span>窓や扉を開け広い空間に開放できる</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="1"><span>他の部屋の活動音が気にならない</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="1"><span>室内がにぎやかな時でも窓は開放できる</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="1"><span>床や壁に柔らかい素材が使われている</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="1"><span>厚みのあるカーテンなどが室内で使われている</span></label>
        </div>

        <div class="sec">
          <div class="sub"><span class="pill">−</span> 気になる状態の目安</div>
          <label class="label"><input type="checkbox" data-cat="build" data-w="-1"><span>窓を閉めることが多い／窓は通常は閉めている</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="-1"><span>床や壁に柔らかい素材が使われていない</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="-1"><span>天井がつるつるした硬い素材</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="-1"><span>隣室のクラス活動がはっきり聴こえる</span></label>
          <label class="label"><input type="checkbox" data-cat="build" data-w="-1"><span>音が抜ける園庭や空間が外にない</span></label>
        </div>
      </div>

      <div class="card">
        <h2>子どもの声や活動</h2>
        <div class="sub">“聞こえ合い”と、“活動の分化”の目安</div>

        <div class="sec">
          <div class="sub"><span class="pill">＋</span> 良い状態の目安</div>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="1"><span>静けさの音や環境のかすかな音を聴く活動がある</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="1"><span>保育者が静かにすると子どもも静かになる</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="1"><span>子ども同士で内緒話ができる</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="1"><span>呼ぶと多くの子が注意を向ける</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="1"><span>活動の場ごとに会話が成り立つ</span></label>
        </div>

        <div class="sec">
          <div class="sub"><span class="pill">−</span> 気になる状態の目安</div>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="-1"><span>幼児同士の会話があまり聴き取れない</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="-1"><span>呼んでも聞こえないことが多い</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="-1"><span>子どもの言葉が聞きとりにくい</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="-1"><span>大声が多くて会話は続きにくい</span></label>
          <label class="label"><input type="checkbox" data-cat="kids" data-w="-1"><span>泣き声・叫び声などの大声が多い</span></label>
        </div>
      </div>

      <div class="card">
        <h2>保育者の声かけや会話</h2>
        <div class="sub">保育者の“声の負担”と“コミュニケーションのしやすさ”の目安</div>

        <div class="sec">
          <div class="sub"><span class="pill">＋</span> 良い状態の目安</div>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="1"><span>緊急時以外、大声を出すことはない</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="1"><span>静かな声で話しかけができる</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="1"><span>子どもと一対一の会話がいつもできる</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="1"><span>大抵は子どもの顔を見て声かけする</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="1"><span>室内での打ち合わせは普通の声でできる</span></label>
        </div>

        <div class="sec">
          <div class="sub"><span class="pill">−</span> 気になる状態の目安</div>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="-1"><span>保育者同士が話すため声を張り上げる</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="-1"><span>子どもによく大声で呼びかける／呼びかけの時に手を打つ・音を鳴らす</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="-1"><span>室内で子どもと一対一で話せない</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="-1"><span>大声が頻繁で保育者に声がれがある</span></label>
          <label class="label"><input type="checkbox" data-cat="teach" data-w="-1"><span>音の大きさに疲れを感じる／保育者に耳の問題が出ている</span></label>
        </div>
      </div>

    </div>

    <div class="foot">
      スコアの目安：＋3〜＋5（良好）／＋1〜＋2（概ね良い）／0（中間）／−1〜−2（負担が出やすい）／−3〜−5（要改善）
    </div>
  </div>

  <script>
    const comments = {
      build: [
        {min: 3,  txt: "良好。音が外へ抜けやすく、室内の反射も抑えられている可能性が高いです。"},
        {min: 1,  txt: "概ね良い。窓の運用や「柔らかい面」を少し増やすと安定します。"},
        {min: 0,  txt: "中間。状況によって響きやすい日が出るかもしれません。"},
        {min: -2, txt: "負担が出やすい。まずは“硬い面を減らす（布・カーペット等）”から。"},
        {min: -999, txt:"要改善。吸音の導入・窓運用の見直しを優先してください。"}
      ],
      kids: [
        {min: 3,  txt: "良好。聞こえ合いが成立し、活動の場ごとの会話が立ちやすい状態です。"},
        {min: 1,  txt: "概ね良い。呼びかけへの反応や“内緒話”が可能かを目安に微調整を。"},
        {min: 0,  txt: "中間。時間帯や活動内容で聞き取りやすさが変動しやすいかもしれません。"},
        {min: -2, txt: "負担が出やすい。会話が続きにくいなら、まずは響きを減らす工夫を。"},
        {min: -999, txt:"要改善。静けさを扱う活動＋環境調整（吸音など）の併用が有効です。"}
      ],
      teach: [
        {min: 3,  txt: "良好。声の負担が少なく、打ち合わせや個別会話が成立しやすいです。"},
        {min: 1,  txt: "概ね良い。声量が上がる場面を特定して“場所/時間の工夫”を。"},
        {min: 0,  txt: "中間。人が多い時や活動が重なる時に声の負担が出るかもしれません。"},
        {min: -2, txt: "負担が出やすい。呼びかけ方法と環境調整をセットで。"},
        {min: -999, txt:"要改善。声・耳の不調や疲労が出やすい状態です。改善の優先度が高いです。"}
      ]
    };

    function pickComment(cat, score){
      for (const c of comments[cat]) if (score >= c.min) return c.txt;
      return "";
    }

    function calc(cat){
      let s = 0;
      document.querySelectorAll(`input[data-cat="${cat}"]`).forEach(cb => {
        if (cb.checked) s += Number(cb.dataset.w);
      });
      return s;
    }

    function update(){
      const b = calc("build");
      const k = calc("kids");
      const t = calc("teach");
      document.getElementById("s-build").textContent = b;
      document.getElementById("s-kids").textContent  = k;
      document.getElementById("s-teach").textContent = t;
      document.getElementById("c-build").textContent = pickComment("build", b);
      document.getElementById("c-kids").textContent  = pickComment("kids", k);
      document.getElementById("c-teach").textContent = pickComment("teach", t);
    }

    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.addEventListener("change", update));
    document.getElementById("resetBtn").addEventListener("click", () => {
      document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
      update();
    });

    update();
  </script>
</body>
</html>
